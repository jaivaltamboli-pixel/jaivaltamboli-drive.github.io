<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Research Vault</title>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* ===============================
   RESET + THEME
================================ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

html, body {
  height: 100%;
  background: radial-gradient(circle at top, #111318, #08090c);
  color: #eaeaea;
}

/* ===============================
   CENTER LAYOUT
================================ */
body {
  display: flex;
  align-items: center;
  justify-content: center;
}

#app {
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
}

/* ===============================
   LOGIN CARD
================================ */
.panel {
  width: 420px;
  max-width: 92%;
  padding: 42px;
  border-radius: 22px;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0)),
    #0d0f14;
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05),
    0 40px 90px rgba(0,0,0,0.75);
  backdrop-filter: blur(10px);
  animation: fadeUp 0.7s ease;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ===============================
   TEXT
================================ */
h1 {
  font-size: 2rem;
  font-weight: 800;
  color: #ffcc00;
  margin-bottom: 10px;
}

p {
  color: #aeb2c1;
  font-size: 0.95rem;
  margin-bottom: 28px;
  line-height: 1.6;
}

/* ===============================
   INPUT
================================ */
input {
  width: 100%;
  padding: 15px 18px;
  font-size: 1rem;
  border-radius: 14px;
  background: #07080c;
  border: 1px solid #1f2230;
  color: #fff;
  outline: none;
  transition: 0.2s ease;
}

input::placeholder {
  color: #555;
}

input:focus {
  border-color: #ffcc00;
  box-shadow: 0 0 0 4px rgba(255,204,0,0.15);
}

/* ===============================
   BUTTON
================================ */
button {
  width: 100%;
  margin-top: 22px;
  padding: 15px;
  border-radius: 16px;
  border: none;
  font-weight: 800;
  font-size: 1rem;
  background: linear-gradient(135deg, #ffcc00, #ffb300);
  color: #000;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 18px 40px rgba(255,204,0,0.35);
}

button:active {
  transform: translateY(0);
}

/* ===============================
   ERROR
================================ */
#error {
  display: none;
  margin-top: 14px;
  color: #ff5a5a;
  font-size: 0.9rem;
}

/* ===============================
   VAULT VIEW
================================ */
#vault {
  display: none;
  padding: 60px;
  animation: fadeUp 0.6s ease;
}

#vault h1 {
  font-size: 2.2rem;
}

#vault p {
  max-width: 600px;
}
</style>
</head>

<body>
<div id="app">

  <!-- LOGIN -->
  <div class="panel" id="login">
    <h1>Research Vault</h1>
    <p>Authorized access only. All activity is monitored.</p>

    <input id="password" type="password" placeholder="Enter password" />
    <button id="unlock">Unlock</button>

    <div id="error">Incorrect password</div>
  </div>

  <!-- VAULT -->
  <div id="vault">
    <h1>Vault Unlocked</h1>
    <p>
      Secure content successfully loaded via Supabase.
      You can now add documents, dashboards, or research tools here.
    </p>
  </div>

</div>

<script>
/* ===============================
   SUPABASE CLIENT
================================ */
const db = window.supabase.createClient(
  "https://sheeqpvmdrksdrxwxdfs.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNoZWVxcHZtZHJrc2RyeHd4ZGZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3NzMyMjEsImV4cCI6MjA4NzM0OTIyMX0.SEub1Atcb68cRwbm5lAB8Iv4cs1fFyJ5moVz8pAXmVk"
);

/* ===============================
   LOGIN LOGIC
================================ */
const unlockBtn = document.getElementById("unlock");
const passwordInput = document.getElementById("password");
const errorBox = document.getElementById("error");
const loginPanel = document.getElementById("login");
const vault = document.getElementById("vault");

async function attemptUnlock() {
  errorBox.style.display = "none";
  const value = passwordInput.value.trim();
  if (!value) return;

const { data, error } = await db
  .from("vault_access")
  .select("*");

console.log("ROWS:", data);
console.log("ERROR:", error);

  if (!data || data.length === 0) {
    errorBox.style.display = "block";
  } else {
    loginPanel.style.display = "none";
    vault.style.display = "block";
  }
}

unlockBtn.addEventListener("click", attemptUnlock);
passwordInput.addEventListener("keydown", e => {
  if (e.key === "Enter") attemptUnlock();
});
</script>

</body>
</html>
